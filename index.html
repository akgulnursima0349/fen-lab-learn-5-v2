<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitki ve Hayvan HÃ¼creleri - KarÅŸÄ±laÅŸtÄ±rma SimÃ¼lasyonu</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .progress-bar {
            background: rgba(255,255,255,0.2);
            height: 8px;
            border-radius: 4px;
            margin-top: 20px;
            overflow: hidden;
        }

        .progress-fill {
            background: #4ade80;
            height: 100%;
            transition: width 0.3s ease;
        }

        .screen {
            display: none;
            padding: 40px;
            animation: fadeIn 0.5s ease;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin: 10px 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .objectives-list {
            background: #f8fafc;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .objectives-list li {
            margin: 10px 0;
            padding-left: 30px;
            position: relative;
        }

        .objectives-list li:before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: #4ade80;
            font-weight: bold;
            font-size: 20px;
        }

        .warning-box {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .microscope-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .microscope-img {
            position: relative;
            background: #f1f5f9;
            padding: 20px;
            border-radius: 10px;
            min-height: 400px;
        }

        .microscope-part {
            position: absolute;
            width: 40px;
            height: 40px;
            background: #3b82f6;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .microscope-part:hover {
            transform: scale(1.2);
            background: #2563eb;
        }

        .microscope-part.matched {
            background: #22c55e;
        }

        .matching-area {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .match-item {
            background: #f1f5f9;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .match-item:hover {
            border-color: #3b82f6;
            background: #dbeafe;
        }

        .match-item.selected {
            background: #3b82f6;
            color: white;
            border-color: #2563eb;
        }

        .match-item.correct {
            background: #22c55e;
            color: white;
        }

        .match-item.wrong {
            background: #ef4444;
            color: white;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .microscope-view {
            width: 400px;
            height: 400px;
            margin: 20px auto;
            border-radius: 50%;
            background: #f8fafc;
            border: 10px solid #1e293b;
            position: relative;
            overflow: hidden;
        }

        .cell-view {
            width: 100%;
            height: 100%;
            position: relative;
            transform-origin: center;
            transition: transform 0.3s;
        }

        .cell {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .plant-cell {
            width: 150px;
            height: 150px;
            border: 4px solid #166534;
            background: #dcfce7;
            clip-path: polygon(10% 0%, 90% 0%, 100% 10%, 100% 90%, 90% 100%, 10% 100%, 0% 90%, 0% 10%);
        }

        .animal-cell {
            width: 150px;
            height: 150px;
            border: 3px solid #7c2d12;
            background: #fed7aa;
            border-radius: 50%;
        }

        .nucleus {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 50px;
            background: #7c3aed;
            border-radius: 50%;
            border: 2px solid #5b21b6;
        }

        .chloroplast {
            position: absolute;
            width: 20px;
            height: 30px;
            background: #16a34a;
            border-radius: 40%;
            border: 1px solid #15803d;
        }

        .vacuole {
            position: absolute;
            width: 60px;
            height: 60px;
            background: rgba(59, 130, 246, 0.3);
            border: 2px dashed #3b82f6;
            border-radius: 50%;
        }

        .label-marker {
            position: absolute;
            width: 12px;
            height: 12px;
            background: #ef4444;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid white;
            transition: all 0.3s;
        }

        .label-marker:hover {
            transform: scale(1.5);
        }

        .label-marker.labeled {
            background: #22c55e;
        }

        .controls {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            justify-content: center;
            align-items: center;
        }

        .slider-control {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        input[type="range"] {
            width: 200px;
        }

        .drawing-canvas {
            border: 2px solid #cbd5e1;
            border-radius: 10px;
            background: white;
            cursor: crosshair;
            display: block;
            margin: 20px auto;
        }

        .drawing-tools {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .tool-btn {
            padding: 10px 20px;
            border: 2px solid #cbd5e1;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .tool-btn.active {
            background: #3b82f6;
            color: white;
            border-color: #2563eb;
        }

        .color-picker {
            width: 50px;
            height: 40px;
            border: 2px solid #cbd5e1;
            border-radius: 8px;
            cursor: pointer;
        }

        .card-pool {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .card {
            background: #f1f5f9;
            padding: 15px;
            border-radius: 10px;
            cursor: move;
            border: 2px solid #cbd5e1;
            transition: all 0.3s;
            user-select: none;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .card.dragging {
            opacity: 0.5;
        }

        .drop-zone {
            min-height: 200px;
            border: 3px dashed #cbd5e1;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            background: #f8fafc;
        }

        .drop-zone.dragover {
            border-color: #3b82f6;
            background: #dbeafe;
        }

        .drop-zone h3 {
            margin-bottom: 15px;
            color: #1e293b;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .quiz-question {
            background: #f8fafc;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 15px 0;
        }

        .quiz-option {
            padding: 15px;
            background: white;
            border: 2px solid #cbd5e1;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quiz-option:hover {
            border-color: #3b82f6;
            background: #dbeafe;
        }

        .quiz-option.selected {
            border-color: #3b82f6;
            background: #dbeafe;
        }

        .quiz-option.correct {
            border-color: #22c55e;
            background: #dcfce7;
        }

        .quiz-option.wrong {
            border-color: #ef4444;
            background: #fee2e2;
        }

        .feedback {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: 500;
        }

        .feedback.success {
            background: #dcfce7;
            color: #166534;
            border-left: 4px solid #22c55e;
        }

        .feedback.error {
            background: #fee2e2;
            color: #991b1b;
            border-left: 4px solid #ef4444;
        }

        .feedback.info {
            background: #dbeafe;
            color: #1e40af;
            border-left: 4px solid #3b82f6;
        }

        .analogy-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .analogy-card {
            background: #f8fafc;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .analogy-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .text-input {
            width: 100%;
            padding: 10px;
            border: 2px solid #cbd5e1;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 14px;
        }

        .checklist {
            background: #f8fafc;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .checklist-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        .checklist-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .score-display {
            font-size: 3rem;
            font-weight: bold;
            text-align: center;
            margin: 30px 0;
            color: #3b82f6;
        }

        .badge {
            width: 150px;
            height: 150px;
            margin: 20px auto;
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            box-shadow: 0 10px 30px rgba(245, 158, 11, 0.4);
        }

        .sample-prep {
            background: #f1f5f9;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .step-animation {
            display: flex;
            align-items: center;
            gap: 20px;
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .step-animation:hover {
            transform: translateX(10px);
            background: #dbeafe;
        }

        .step-number {
            width: 40px;
            height: 40px;
            background: #3b82f6;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .step-animation.completed .step-number {
            background: #22c55e;
        }

        .mode-switch {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }

        .mode-btn {
            padding: 15px 30px;
            border: 2px solid #cbd5e1;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s;
        }

        .mode-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
        }

        .info-card {
            background: #eff6ff;
            border: 2px solid #3b82f6;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .info-card h4 {
            color: #1e40af;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .microscope-container,
            .comparison-grid {
                grid-template-columns: 1fr;
            }

            .microscope-view {
                width: 300px;
                height: 300px;
            }

            .container {
                border-radius: 10px;
            }

            .screen {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”¬ Bitki ve Hayvan HÃ¼creleri</h1>
            <p>FB.5.3.1.1 - KarÅŸÄ±laÅŸtÄ±rmalÄ± Ã–ÄŸrenme SimÃ¼lasyonu</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <!-- E1: AÃ§Ä±lÄ±ÅŸ / Ã–ÄŸrenme Hedefleri -->
        <div class="screen active" id="screen1">
            <h2>ğŸ¯ Ã–ÄŸrenme Hedefleri</h2>
            <div class="objectives-list">
                <ul>
                    <li>Mikroskobun bÃ¶lÃ¼mlerini ve iÅŸlevini tanÄ±mak</li>
                    <li>Bitki ve hayvan hÃ¼crelerinden gÃ¶zlem yaparak temel kÄ±sÄ±mlarÄ± belirlemek (zar-sitoplazma-Ã§ekirdek)</li>
                    <li>Benzerlikleri ve farklÄ±lÄ±klarÄ± sistematik biÃ§imde listelemek</li>
                    <li>Poster/model/dijital iÃ§erik ile karÅŸÄ±laÅŸtÄ±rma Ã¼rÃ¼nÃ¼ oluÅŸturmak</li>
                </ul>
            </div>

            <div class="warning-box">
                <strong>âš ï¸ SÄ±nÄ±rlÄ±lÄ±klar:</strong> Organellerin ayrÄ±ntÄ±lÄ± yapÄ±larÄ± iÅŸlenmez; yalnÄ±z isim/temel gÃ¶rev. HÃ¼cre bÃ¶lÃ¼nmesi, DNA ayrÄ±ntÄ±larÄ± yoktur.
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" onclick="goToScreen(2)">BaÅŸla ğŸš€</button>
            </div>
        </div>

        <!-- E2: Mikroskop TanÄ±tÄ±mÄ± -->
        <div class="screen" id="screen2">
            <h2>ğŸ”¬ Mikroskop TanÄ±tÄ±mÄ±</h2>
            <p>Mikroskobun bÃ¶lÃ¼mlerini iÅŸlevleriyle eÅŸleÅŸtirin:</p>

            <div class="microscope-container">
                <div class="microscope-img">
                    <svg width="300" height="450" style="margin: 0 auto; display: block;" viewBox="0 0 300 450">
                        <!-- GÃ¶lge tanÄ±mlarÄ± -->
                        <defs>
                            <linearGradient id="metalGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:#94a3b8;stop-opacity:1" />
                                <stop offset="50%" style="stop-color:#cbd5e1;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#64748b;stop-opacity:1" />
                            </linearGradient>
                            <radialGradient id="lensGrad">
                                <stop offset="0%" style="stop-color:#dbeafe;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:1" />
                                </radialGradient>
                        </defs>
                        
                        <!-- Taban -->
                        <ellipse cx="150" cy="420" rx="90" ry="15" fill="#1e293b"/>
                        <rect x="60" y="405" width="180" height="20" fill="#334155" rx="5"/>
                        
                        <!-- Kol (arm) -->
                        <path d="M 150 405 Q 120 350, 130 250 Q 135 200, 145 150" 
                              stroke="#475569" stroke-width="35" fill="none" stroke-linecap="round"/>
                        
                        <!-- GÃ¶vde (body) -->
                        <rect x="110" y="250" width="80" height="160" fill="url(#metalGrad)" rx="8"/>
                        <rect x="115" y="255" width="70" height="150" fill="#64748b" rx="5"/>
                        
                        <!-- Stage (Tabla) -->
                        <rect x="90" y="240" width="120" height="25" fill="#334155" rx="5"/>
                        <rect x="100" y="245" width="100" height="15" fill="#475569" rx="3"/>
                        <!-- Stage clips -->
                        <rect x="95" y="250" width="15" height="8" fill="#94a3b8" rx="2"/>
                        <rect x="190" y="250" width="15" height="8" fill="#94a3b8" rx="2"/>
                        
                        <!-- Revolver (Objektif dÃ¶ner kÄ±smÄ±) -->
                        <circle cx="150" cy="220" r="25" fill="#1e293b"/>
                        <circle cx="150" cy="220" r="20" fill="#334155"/>
                        
                        <!-- Objektifler -->
                        <rect x="125" y="195" width="12" height="25" fill="#64748b" rx="2"/>
                        <rect x="145" y="190" width="12" height="30" fill="#64748b" rx="2"/>
                        <rect x="165" y="193" width="12" height="27" fill="#64748b" rx="2"/>
                        <!-- Objektif uÃ§larÄ± -->
                        <ellipse cx="131" cy="195" rx="7" ry="3" fill="#1e293b"/>
                        <ellipse cx="151" cy="190" rx="7" ry="3" fill="#1e293b"/>
                        <ellipse cx="171" cy="193" rx="7" ry="3" fill="#1e293b"/>
                        
                        <!-- TÃ¼p (Tube) -->
                        <rect x="135" y="80" width="30" height="90" fill="url(#metalGrad)" rx="4"/>
                        <rect x="138" y="83" width="24" height="84" fill="#475569" rx="3"/>
                        
                        <!-- GÃ¶z merceÄŸi (Ocular) -->
                        <ellipse cx="150" cy="75" rx="20" ry="8" fill="#1e293b"/>
                        <ellipse cx="150" cy="75" rx="16" ry="6" fill="#334155"/>
                        <circle cx="150" cy="70" r="18" fill="url(#lensGrad)"/>
                        <circle cx="150" cy="70" r="12" fill="#1e40af" opacity="0.6"/>
                        <circle cx="145" cy="65" r="5" fill="#93c5fd" opacity="0.8"/>
                        
                        <!-- Makro Ayar VidasÄ± (Coarse adjustment) -->
                        <circle cx="105" cy="330" r="18" fill="#1e293b"/>
                        <circle cx="105" cy="330" r="15" fill="#334155"/>
                        <circle cx="105" cy="330" r="12" fill="#475569"/>
                        <!-- Vida detaylarÄ± -->
                        <line x1="105" y1="318" x2="105" y2="342" stroke="#64748b" stroke-width="2"/>
                        <line x1="93" y1="330" x2="117" y2="330" stroke="#64748b" stroke-width="2"/>
                        
                        <!-- Mikro Ayar VidasÄ± (Fine adjustment) -->
                        <circle cx="195" cy="330" r="15" fill="#1e293b"/>
                        <circle cx="195" cy="330" r="12" fill="#334155"/>
                        <circle cx="195" cy="330" r="9" fill="#475569"/>
                        <!-- Vida detaylarÄ± -->
                        <line x1="195" y1="321" x2="195" y2="339" stroke="#64748b" stroke-width="1.5"/>
                        <line x1="186" y1="330" x2="204" y2="330" stroke="#64748b" stroke-width="1.5"/>
                        
                        <!-- IÅŸÄ±k KaynaÄŸÄ± (Illuminator) -->
                        <circle cx="150" cy="410" r="20" fill="#fbbf24"/>
                        <circle cx="150" cy="410" r="15" fill="#fef3c7"/>
                        <circle cx="145" cy="405" r="8" fill="#fef9e7" opacity="0.8"/>
                        
                        <!-- Diyafram (Diaphragm) altÄ±nda -->
                        <circle cx="150" cy="265" r="12" fill="#334155"/>
                        <circle cx="150" cy="265" r="8" fill="#64748b"/>
                        
                        <!-- Ayna/IÅŸÄ±k yansÄ±tÄ±cÄ± -->
                        <ellipse cx="150" cy="390" rx="25" ry="10" fill="#cbd5e1" opacity="0.7"/>
                    </svg>
                    
                    <div class="microscope-part" style="top: 50px; left: 50%;" data-part="goz" id="part1">1</div>
                    <div class="microscope-part" style="top: 180px; left: 50%;" data-part="objektif" id="part2">2</div>
                    <div class="microscope-part" style="top: 235px; left: 50%;" data-part="tabla" id="part3">3</div>
                    <div class="microscope-part" style="top: 370px; left: 50%;" data-part="isik" id="part4">4</div>
                    <div class="microscope-part" style="top: 310px; left: 20%;" data-part="vida" id="part5">5</div>
                    <div class="microscope-part" style="top: 250px; left: 50%;" data-part="diyafram" id="part6">6</div>
                </div>

                <div class="matching-area" id="matchingArea">
                    <div class="match-item" data-function="goz" onclick="selectMatch(this)">
                        <strong>GÃ¶z MerceÄŸi:</strong> GÃ¶rÃ¼ntÃ¼yÃ¼ bÃ¼yÃ¼tÃ¼r
                    </div>
                    <div class="match-item" data-function="objektif" onclick="selectMatch(this)">
                        <strong>Objektifler:</strong> FarklÄ± bÃ¼yÃ¼tme seÃ§enekleri saÄŸlar
                    </div>
                    <div class="match-item" data-function="tabla" onclick="selectMatch(this)">
                        <strong>Tabla:</strong> PreparatÄ± taÅŸÄ±r ve sabitleme klipsi ile tutar
                    </div>
                    <div class="match-item" data-function="diyafram" onclick="selectMatch(this)">
                        <strong>Diyafram:</strong> IÅŸÄ±k miktarÄ±nÄ± ayarlar
                    </div>
                    <div class="match-item" data-function="isik" onclick="selectMatch(this)">
                        <strong>IÅŸÄ±k KaynaÄŸÄ±:</strong> Ã–rneÄŸi aydÄ±nlatÄ±r
                    </div>
                    <div class="match-item" data-function="vida" onclick="selectMatch(this)">
                        <strong>Makro/Mikro Vida:</strong> Kaba/ince netlik ayarÄ± yapar
                    </div>
                </div>
            </div>

            <div id="e2Feedback"></div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" id="e2NextBtn" disabled onclick="goToScreen(3)">Ã–rnek HazÄ±rlÄ±ÄŸÄ± â†’</button>
            </div>
        </div>

        <!-- E3: Ã–rnek HazÄ±rlÄ±ÄŸÄ± -->
        <div class="screen" id="screen3">
            <h2>ğŸ§ª Ã–rnek HazÄ±rlÄ±ÄŸÄ± / GÃ¶zleme HazÄ±rlÄ±k</h2>
            
            <div class="mode-switch">
                <button class="mode-btn active" onclick="selectMode('plant', this)">ğŸŒ¿ Bitki (SoÄŸan zarÄ±)</button>
                <button class="mode-btn" onclick="selectMode('animal', this)">ğŸ¾ Hayvan (Yanak epiteli)</button>
            </div>

            <div class="sample-prep">
                <h3 id="sampleTitle">Bitki Ã–rneÄŸi HazÄ±rlama AdÄ±mlarÄ±</h3>
                <div class="step-animation" onclick="completeStep(1)">
                    <div class="step-number">1</div>
                    <div>
                        <strong>Lam-Lamele YerleÅŸtir</strong>
                        <p>Ã–rneÄŸi lam Ã¼zerine yerleÅŸtir ve lamel ile kapat</p>
                    </div>
                </div>
                <div class="step-animation" onclick="completeStep(2)">
                    <div class="step-number">2</div>
                    <div>
                        <strong>Boyama (Opsiyonel)</strong>
                        <p>Sanal boyama, kontrastÄ± artÄ±rÄ±r - gÃ¶rÃ¼nÃ¼rlÃ¼ÄŸÃ¼ iyileÅŸtirir</p>
                    </div>
                </div>
                <div class="step-animation" onclick="completeStep(3)">
                    <div class="step-number">3</div>
                    <div>
                        <strong>Mikroskoba YerleÅŸtir</strong>
                        <p>PreparatÄ± tabla Ã¼zerine koy ve klips ile sabitle</p>
                    </div>
                </div>
                <div class="step-animation" onclick="completeStep(4)">
                    <div class="step-number">4</div>
                    <div>
                        <strong>DÃ¼ÅŸÃ¼k Objektif ile BaÅŸla</strong>
                        <p>En dÃ¼ÅŸÃ¼k bÃ¼yÃ¼tme ile baÅŸla ve netleÅŸtir</p>
                    </div>
                </div>
            </div>

            <div id="e3Feedback"></div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" id="e3NextBtn" disabled onclick="goToScreen(4)">Bitki HÃ¼cresi GÃ¶zlemi â†’</button>
            </div>
        </div>

        <!-- E4: Bitki HÃ¼cresi GÃ¶zlemi -->
        <div class="screen" id="screen4">
            <h2>ğŸŒ¿ GÃ¶zlem LaboratuvarÄ±: Bitki HÃ¼cresi</h2>
            <p>Bitki hÃ¼cresinde temel kÄ±sÄ±mlarÄ± iÅŸaretleyin (Zar, Sitoplazma, Ã‡ekirdek):</p>

            <div class="microscope-view" id="plantMicroscope">
                <div class="cell-view" id="plantCellView">
                    <div class="cell plant-cell">
                        <div class="nucleus"></div>
                        <div class="chloroplast" style="top: 20px; left: 30px;"></div>
                        <div class="chloroplast" style="top: 60px; right: 25px;"></div>
                        <div class="chloroplast" style="bottom: 30px; left: 40px;"></div>
                        <div class="vacuole" style="top: 50%; left: 50%; transform: translate(-50%, -50%);"></div>
                        
                        <div class="label-marker" style="top: 5px; left: 50%;" data-label="zar" onclick="labelPart(this, 'plant')"></div>
                        <div class="label-marker" style="top: 40%; left: 20%;" data-label="sitoplazma" onclick="labelPart(this, 'plant')"></div>
                        <div class="label-marker" style="top: 50%; left: 50%;" data-label="cekirdek" onclick="labelPart(this, 'plant')"></div>
                    </div>
                </div>
            </div>

            <div class="controls">
                <div class="slider-control">
                    <label>ğŸ” BÃ¼yÃ¼tme:</label>
                    <input type="range" min="1" max="3" value="2" onchange="changeMagnification('plant', this.value)">
                    <span id="plantMag">Orta</span>
                </div>
                <div class="slider-control">
                    <label>ğŸ¯ Netlik:</label>
                    <input type="range" min="0" max="100" value="50" onchange="changeFocus('plant', this.value)">
                </div>
            </div>

            <div class="info-card">
                <h4>ğŸ’¡ Bitki HÃ¼cresi Bilgileri:</h4>
                <p><strong>HÃ¼cre DuvarÄ±:</strong> Bitki hÃ¼cresine destek/ÅŸekil saÄŸlar</p>
                <p><strong>Kloroplast:</strong> Fotosentez merkezidir (yeÅŸil renk)</p>
                <p><strong>Koful:</strong> Depolama; bitkide genellikle bÃ¼yÃ¼k</p>
            </div>

            <div id="e4Feedback"></div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" id="e4NextBtn" disabled onclick="goToScreen(5)">Hayvan HÃ¼cresi GÃ¶zlemi â†’</button>
            </div>
        </div>

        <!-- E5: Hayvan HÃ¼cresi GÃ¶zlemi -->
        <div class="screen" id="screen5">
            <h2>ğŸ¾ GÃ¶zlem LaboratuvarÄ±: Hayvan HÃ¼cresi</h2>
            <p>Hayvan hÃ¼cresinde temel kÄ±sÄ±mlarÄ± iÅŸaretleyin (Zar, Sitoplazma, Ã‡ekirdek):</p>

            <div class="microscope-view" id="animalMicroscope">
                <div class="cell-view" id="animalCellView">
                    <div class="cell animal-cell">
                        <div class="nucleus"></div>
                        
                        <div class="label-marker" style="top: 5px; left: 50%;" data-label="zar" onclick="labelPart(this, 'animal')"></div>
                        <div class="label-marker" style="top: 40%; left: 20%;" data-label="sitoplazma" onclick="labelPart(this, 'animal')"></div>
                        <div class="label-marker" style="top: 50%; left: 50%;" data-label="cekirdek" onclick="labelPart(this, 'animal')"></div>
                    </div>
                </div>
            </div>

            <div class="controls">
                <div class="slider-control">
                    <label>ğŸ” BÃ¼yÃ¼tme:</label>
                    <input type="range" min="1" max="3" value="2" onchange="changeMagnification('animal', this.value)">
                    <span id="animalMag">Orta</span>
                </div>
                <div class="slider-control">
                    <label>ğŸ¯ Netlik:</label>
                    <input type="range" min="0" max="100" value="50" onchange="changeFocus('animal', this.value)">
                </div>
            </div>

            <div class="info-card">
                <h4>ğŸ’¡ Hayvan HÃ¼cresi Bilgileri:</h4>
                <p><strong>Sentriyoller:</strong> HÃ¼cre bÃ¶lÃ¼nmesinde rol oynar</p>
                <p><strong>KÃ¼Ã§Ã¼k Kofullar:</strong> Hayvanda kÃ¼Ã§Ã¼k ve Ã§ok sayÄ±da</p>
                <p><strong>HÃ¼cre DuvarÄ±:</strong> Hayvan hÃ¼cresinde YOKTUR</p>
            </div>

            <div id="e5Feedback"></div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" id="e5NextBtn" disabled onclick="goToScreen(6)">Ã‡izim AtÃ¶lyesi â†’</button>
            </div>
        </div>

        <!-- E6: Ã‡izim AtÃ¶lyesi -->
        <div class="screen" id="screen6">
            <h2>ğŸ¨ Ã‡izim AtÃ¶lyesi</h2>
            <p>GÃ¶zlemlerinize dayanarak bitki ve hayvan hÃ¼crelerini Ã§izin ve etiketleyin:</p>

            <div class="drawing-tools">
                <button class="tool-btn active" onclick="selectTool('pen', this)">âœï¸ Kalem</button>
                <button class="tool-btn" onclick="selectTool('eraser', this)">ğŸ§¹ Silgi</button>
                <input type="color" class="color-picker" id="colorPicker" value="#000000">
                <button class="tool-btn" onclick="clearCanvas('plant')">ğŸ—‘ï¸ Bitki Temizle</button>
                <button class="tool-btn" onclick="clearCanvas('animal')">ğŸ—‘ï¸ Hayvan Temizle</button>
            </div>

            <div class="comparison-grid">
                <div>
                    <h3 style="text-align: center;">ğŸŒ¿ Bitki HÃ¼cresi</h3>
                    <canvas id="plantCanvas" class="drawing-canvas" width="400" height="400"></canvas>
                    <div style="text-align: center; margin-top: 10px;">
                        <button class="btn" onclick="addLabel('plant', 'HÃ¼cre ZarÄ±')">+ HÃ¼cre ZarÄ±</button>
                        <button class="btn" onclick="addLabel('plant', 'Sitoplazma')">+ Sitoplazma</button>
                        <button class="btn" onclick="addLabel('plant', 'Ã‡ekirdek')">+ Ã‡ekirdek</button>
                    </div>
                </div>
                <div>
                    <h3 style="text-align: center;">ğŸ¾ Hayvan HÃ¼cresi</h3>
                    <canvas id="animalCanvas" class="drawing-canvas" width="400" height="400"></canvas>
                    <div style="text-align: center; margin-top: 10px;">
                        <button class="btn" onclick="addLabel('animal', 'HÃ¼cre ZarÄ±')">+ HÃ¼cre ZarÄ±</button>
                        <button class="btn" onclick="addLabel('animal', 'Sitoplazma')">+ Sitoplazma</button>
                        <button class="btn" onclick="addLabel('animal', 'Ã‡ekirdek')">+ Ã‡ekirdek</button>
                    </div>
                </div>
            </div>

            <div class="checklist">
                <h3>âœ… Kontrol Listesi</h3>
                <div class="checklist-item">
                    <input type="checkbox" id="check1" onchange="updateChecklist()">
                    <label for="check1">Etiketler eklendi mi (zar-sitoplazma-Ã§ekirdek)?</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check2" onchange="updateChecklist()">
                    <label for="check2">Ã‡izimler okunaklÄ± mÄ±?</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check3" onchange="updateChecklist()">
                    <label for="check3">Her iki hÃ¼cre tÃ¼rÃ¼ de Ã§izildi mi?</label>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" id="e6NextBtn" disabled onclick="goToScreen(7)">Benzerlikâ€“FarklÄ±lÄ±k â†’</button>
            </div>
        </div>

        <!-- E7: Benzerlikâ€“FarklÄ±lÄ±k Kurucu -->
        <div class="screen" id="screen7">
            <h2>ğŸ”„ Benzerlikâ€“FarklÄ±lÄ±k Kurucu</h2>
            <p>KartlarÄ± sÃ¼rÃ¼kleyerek doÄŸru kategorilere yerleÅŸtirin:</p>

            <div class="card-pool" id="cardPool">
                <!-- Benzerlik kartlarÄ± -->
                <div class="card" draggable="true" data-type="benzerlik" data-card="zar">HÃ¼cre zarÄ± vardÄ±r</div>
                <div class="card" draggable="true" data-type="benzerlik" data-card="sitoplazma">Sitoplazma vardÄ±r</div>
                <div class="card" draggable="true" data-type="benzerlik" data-card="cekirdek">Ã‡ekirdek vardÄ±r</div>
                <div class="card" draggable="true" data-type="benzerlik" data-card="temel">Temel yaÅŸam birimi hÃ¼credir</div>
                
                <!-- FarklÄ±lÄ±k kartlarÄ± - Bitki -->
                <div class="card" draggable="true" data-type="fark" data-card="duvar">Bitki: HÃ¼cre duvarÄ± vardÄ±r</div>
                <div class="card" draggable="true" data-type="fark" data-card="kloroplast">Bitki: Kloroplast vardÄ±r</div>
                <div class="card" draggable="true" data-type="fark" data-card="koful-b">Bitki: BÃ¼yÃ¼k merkezi koful</div>
                <div class="card" draggable="true" data-type="fark" data-card="sekil-b">Bitki: KÃ¶ÅŸeli/Ã§okgen gÃ¶rÃ¼nÃ¼m</div>
                
                <!-- FarklÄ±lÄ±k kartlarÄ± - Hayvan -->
                <div class="card" draggable="true" data-type="fark" data-card="duvar-y">Hayvan: HÃ¼cre duvarÄ± yoktur</div>
                <div class="card" draggable="true" data-type="fark" data-card="klor-y">Hayvan: Kloroplast yoktur</div>
                <div class="card" draggable="true" data-type="fark" data-card="koful-y">Hayvan: KÃ¼Ã§Ã¼k kofullar</div>
                <div class="card" draggable="true" data-type="fark" data-card="sekil-y">Hayvan: Yuvarlak/oval gÃ¶rÃ¼nÃ¼m</div>
                
                <!-- YanÄ±ltÄ±cÄ± kartlar -->
                <div class="card" draggable="true" data-type="yanlis" data-card="yanlis1">âŒ Bitki hÃ¼cresinde Ã§ekirdek yoktur</div>
                <div class="card" draggable="true" data-type="yanlis" data-card="yanlis2">âŒ Hayvan hÃ¼cresinde zar yoktur</div>
            </div>

            <div class="comparison-grid">
                <div class="drop-zone" id="benzerlikZone">
                    <h3>âœ… Benzerlikler</h3>
                    <p style="color: #64748b; font-size: 14px;">Her iki hÃ¼crede de bulunan Ã¶zellikler</p>
                </div>
                <div class="drop-zone" id="farkZone">
                    <h3>ğŸ”€ FarklÄ±lÄ±klar</h3>
                    <p style="color: #64748b; font-size: 14px;">HÃ¼creler arasÄ±ndaki farklar</p>
                </div>
            </div>

            <div id="e7Feedback"></div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" id="e7NextBtn" disabled onclick="goToScreen(8)">Organeller: Ä°sim & GÃ¶rev â†’</button>
            </div>
        </div>

        <!-- E8: Organeller Ä°sim & GÃ¶rev -->
        <div class="screen" id="screen8">
            <h2>ğŸ§¬ Organeller: Ä°sim & GÃ¶rev EÅŸleÅŸtirme</h2>
            <p>Her organeli gÃ¶reviyle eÅŸleÅŸtirin:</p>

            <div style="max-width: 800px; margin: 30px auto;">
                <div class="match-item" data-organelle="kloroplast" onclick="selectOrganelle(this)">
                    <strong>Kloroplast</strong>
                </div>
                <div class="match-item" data-organelle="koful" onclick="selectOrganelle(this)">
                    <strong>Koful</strong>
                </div>
                <div class="match-item" data-organelle="duvar" onclick="selectOrganelle(this)">
                    <strong>HÃ¼cre DuvarÄ±</strong>
                </div>
                <div class="match-item" data-organelle="zar" onclick="selectOrganelle(this)">
                    <strong>HÃ¼cre ZarÄ±</strong>
                </div>
                <div class="match-item" data-organelle="sitoplazma" onclick="selectOrganelle(this)">
                    <strong>Sitoplazma</strong>
                </div>
                <div class="match-item" data-organelle="cekirdek" onclick="selectOrganelle(this)">
                    <strong>Ã‡ekirdek</strong>
                </div>
                <div class="match-item" data-organelle="sentriyol" onclick="selectOrganelle(this)">
                    <strong>Sentriyol</strong>
                </div>

                <div style="height: 30px;"></div>

                <div class="match-item" data-function="fotosentez" onclick="matchFunction(this)">
                    Fotosentez yapar (Bitki)
                </div>
                <div class="match-item" data-function="depolama" onclick="matchFunction(this)">
                    Depolama/atÄ±k-su dengesi
                </div>
                <div class="match-item" data-function="destek" onclick="matchFunction(this)">
                    DÄ±ÅŸ destek/ÅŸekil saÄŸlar (Bitki)
                </div>
                <div class="match-item" data-function="kontrol" onclick="matchFunction(this)">
                    Madde giriÅŸ-Ã§Ä±kÄ±ÅŸÄ±nÄ± kontrol eder
                </div>
                <div class="match-item" data-function="ortam" onclick="matchFunction(this)">
                    Jel kÄ±vamlÄ± ortam; yaÅŸam olaylarÄ±nÄ±n yeri
                </div>
                <div class="match-item" data-function="yonetim" onclick="matchFunction(this)">
                    YÃ¶netim/kalÄ±tÄ±m materyalini barÄ±ndÄ±rÄ±r
                </div>
                <div class="match-item" data-function="bolunme" onclick="matchFunction(this)">
                    HÃ¼cre bÃ¶lÃ¼nmesinde rol (Hayvan)
                </div>
            </div>

            <div id="e8Feedback"></div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" id="e8NextBtn" disabled onclick="goToScreen(9)">Analojiler â†’</button>
            </div>
        </div>

        <!-- E9: Analoji AtÃ¶lyesi -->
        <div class="screen" id="screen9">
            <h2>ğŸ’¡ Analoji AtÃ¶lyesi</h2>
            <p>HÃ¼cre yapÄ±larÄ±nÄ± gÃ¼nlÃ¼k hayattaki benzer yapÄ±larla iliÅŸkilendirin:</p>

            <div class="analogy-grid">
                <div class="analogy-card">
                    <div class="analogy-icon">ğŸ«</div>
                    <h4>Okul MÃ¼dÃ¼rÃ¼</h4>
                    <input type="text" class="text-input" placeholder="Hangi hÃ¼cre yapÄ±sÄ±na benzer?" data-answer="Ã§ekirdek">
                    <p style="margin-top: 10px; font-size: 14px; color: #64748b;">Ä°pucu: YÃ¶netim merkezi...</p>
                </div>

                <div class="analogy-card">
                    <div class="analogy-icon">ğŸ§±</div>
                    <h4>Okul BinasÄ± DuvarÄ±</h4>
                    <input type="text" class="text-input" placeholder="Hangi hÃ¼cre yapÄ±sÄ±na benzer?" data-answer="hÃ¼cre duvarÄ±">
                    <p style="margin-top: 10px; font-size: 14px; color: #64748b;">Ä°pucu: Destek ve koruma...</p>
                </div>

                <div class="analogy-card">
                    <div class="analogy-icon">ğŸšª</div>
                    <h4>KapÄ±/GÃ¼venlik</h4>
                    <input type="text" class="text-input" placeholder="Hangi hÃ¼cre yapÄ±sÄ±na benzer?" data-answer="hÃ¼cre zarÄ±">
                    <p style="margin-top: 10px; font-size: 14px; color: #64748b;">Ä°pucu: GiriÅŸ-Ã§Ä±kÄ±ÅŸ kontrolÃ¼...</p>
                </div>

                <div class="analogy-card">
                    <div class="analogy-icon">â˜€ï¸</div>
                    <h4>GÃ¼neÅŸ Panelleri</h4>
                    <input type="text" class="text-input" placeholder="Hangi hÃ¼cre yapÄ±sÄ±na benzer?" data-answer="kloroplast">
                    <p style="margin-top: 10px; font-size: 14px; color: #64748b;">Ä°pucu: Enerji Ã¼retimi...</p>
                </div>

                <div class="analogy-card">
                    <div class="analogy-icon">ğŸ“¦</div>
                    <h4>Depo</h4>
                    <input type="text" class="text-input" placeholder="Hangi hÃ¼cre yapÄ±sÄ±na benzer?" data-answer="koful">
                    <p style="margin-top: 10px; font-size: 14px; color: #64748b;">Ä°pucu: Depolama alanÄ±...</p>
                </div>
            </div>

            <div class="info-card" style="margin: 30px 0;">
                <h4>ğŸ‘¥ Grup Ã‡alÄ±ÅŸmasÄ± HatÄ±rlatmasÄ±:</h4>
                <p>â€¢ Herkesin sÃ¶z hakkÄ±na saygÄ± gÃ¶sterin</p>
                <p>â€¢ GÃ¶revleri adil bir ÅŸekilde paylaÅŸÄ±n</p>
                <p>â€¢ FarklÄ± fikirleri dinleyin ve tartÄ±ÅŸÄ±n</p>
            </div>

            <div id="e9Feedback"></div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" onclick="checkAnalogies()">CevaplarÄ± Kontrol Et</button>
                <button class="btn" id="e9NextBtn" disabled onclick="goToScreen(10)">Son Test â†’</button>
            </div>
        </div>

        <!-- E10: Son Test -->
        <div class="screen" id="screen10">
            <h2>ğŸ“ Son Test</h2>
            <p>Ã–ÄŸrendiklerinizi test edin! BaÅŸarÄ± eÅŸiÄŸi: %80</p>

            <div class="quiz-question">
                <p><strong>Soru 1:</strong> Bitki ve hayvan hÃ¼crelerinin her ikisinde hÃ¼cre zarÄ±, sitoplazma ve genellikle Ã§ekirdek bulunur.</p>
                <div class="quiz-options">
                    <div class="quiz-option" onclick="answerQuestion(1, true, true)">âœ… DoÄŸru</div>
                    <div class="quiz-option" onclick="answerQuestion(1, false, true)">âŒ YanlÄ±ÅŸ</div>
                </div>
            </div>

            <div class="quiz-question">
                <p><strong>Soru 2:</strong> Kloroplast, hayvan hÃ¼crelerinde de yaygÄ±ndÄ±r.</p>
                <div class="quiz-options">
                    <div class="quiz-option" onclick="answerQuestion(2, true, false)">âœ… DoÄŸru</div>
                    <div class="quiz-option" onclick="answerQuestion(2, false, false)">âŒ YanlÄ±ÅŸ</div>
                </div>
            </div>

            <div class="quiz-question">
                <p><strong>Soru 3:</strong> HÃ¼cre duvarÄ±, bitki hÃ¼cresine destek/ÅŸekil saÄŸlar.</p>
                <div class="quiz-options">
                    <div class="quiz-option" onclick="answerQuestion(3, true, true)">âœ… DoÄŸru</div>
                    <div class="quiz-option" onclick="answerQuestion(3, false, true)">âŒ YanlÄ±ÅŸ</div>
                </div>
            </div>

            <div class="quiz-question">
                <p><strong>Soru 4:</strong> Bitki hÃ¼cresinde koful genellikle bÃ¼yÃ¼k, hayvan hÃ¼cresinde kÃ¼Ã§Ã¼k ve Ã§ok olabilir.</p>
                <div class="quiz-options">
                    <div class="quiz-option" onclick="answerQuestion(4, true, true)">âœ… DoÄŸru</div>
                    <div class="quiz-option" onclick="answerQuestion(4, false, true)">âŒ YanlÄ±ÅŸ</div>
                </div>
            </div>

            <div class="quiz-question">
                <p><strong>Soru 5:</strong> Hayvan hÃ¼cresi genellikle kÃ¶ÅŸeli; bitki hÃ¼cresi genellikle yuvarlaktÄ±r.</p>
                <div class="quiz-options">
                    <div class="quiz-option" onclick="answerQuestion(5, true, false)">âœ… DoÄŸru</div>
                    <div class="quiz-option" onclick="answerQuestion(5, false, false)">âŒ YanlÄ±ÅŸ</div>
                </div>
            </div>

            <div id="e10Feedback"></div>

            <div id="finalResult" style="display: none; text-align: center; margin: 30px 0;">
                <div class="score-display" id="scoreDisplay"></div>
                <div id="badgeContainer"></div>
                <button class="btn" onclick="downloadReport()">ğŸ“¥ Raporu Ä°ndir</button>
                <button class="btn" onclick="location.reload()">ğŸ”„ BaÅŸtan BaÅŸla</button>
            </div>
        </div>
    </div>

    <script>
        // Global deÄŸiÅŸkenler
        let currentScreen = 1;
        let e2Matched = 0;
        let e2SelectedMatch = null;
        let e2SelectedPart = null;
        let e3StepsCompleted = 0;
        let currentMode = 'plant';
        let plantLabels = { zar: false, sitoplazma: false, cekirdek: false };
        let animalLabels = { zar: false, sitoplazma: false, cekirdek: false };
        let currentTool = 'pen';
        let isDrawing = false;
        let plantCtx, animalCtx;
        let plantLabelsAdded = { zar: false, sitoplazma: false, cekirdek: false };
        let animalLabelsAdded = { zar: false, sitoplazma: false, cekirdek: false };
        let benzerlikCount = 0;
        let farkCount = 0;
        let e8SelectedOrganelle = null;
        let e8Matches = {};
        let quizAnswers = {};
        let quizScore = 0;

        // Sayfa yÃ¼klendiÄŸinde kartlarÄ± karÄ±ÅŸtÄ±r
        window.addEventListener('DOMContentLoaded', function() {
            shuffleMatchingCards();
        });

        // EÅŸleÅŸtirme kartlarÄ±nÄ± karÄ±ÅŸtÄ±r
        function shuffleMatchingCards() {
            const container = document.getElementById('matchingArea');
            if (!container) return;
            
            const items = Array.from(container.children);
            // Fisher-Yates shuffle algoritmasÄ±
            for (let i = items.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                container.appendChild(items[j]);
            }
        }

        // Ekran geÃ§iÅŸleri
        function goToScreen(screenNum) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('screen' + screenNum).classList.add('active');
            currentScreen = screenNum;
            updateProgress();
        }

        function updateProgress() {
            const progress = (currentScreen / 10) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        // E2: Mikroskop EÅŸleÅŸtirme
        function selectMatch(element) {
            document.querySelectorAll('.match-item').forEach(item => {
                item.classList.remove('selected');
            });
            element.classList.add('selected');
            e2SelectedMatch = element.getAttribute('data-function');
        }

        document.querySelectorAll('.microscope-part').forEach(part => {
            part.addEventListener('click', function() {
                if (!e2SelectedMatch) {
                    showFeedback('e2Feedback', 'LÃ¼tfen Ã¶nce bir iÅŸlev seÃ§in!', 'info');
                    return;
                }

                const partType = this.getAttribute('data-part');
                if (partType === e2SelectedMatch) {
                    this.classList.add('matched');
                    document.querySelector(`.match-item[data-function="${e2SelectedMatch}"]`).classList.add('correct');
                    e2Matched++;
                    showFeedback('e2Feedback', 'âœ… Harika! DoÄŸru eÅŸleÅŸtirme!', 'success');
                    e2SelectedMatch = null;

                    if (e2Matched === 6) {
                        document.getElementById('e2NextBtn').disabled = false;
                        showFeedback('e2Feedback', 'ğŸ‰ TÃ¼m eÅŸleÅŸtirmeleri tamamladÄ±nÄ±z! Devam edebilirsiniz.', 'success');
                    }
                } else {
                    document.querySelector(`.match-item[data-function="${e2SelectedMatch}"]`).classList.add('wrong');
                    showFeedback('e2Feedback', 'âŒ YanlÄ±ÅŸ eÅŸleÅŸtirme. Tekrar deneyin!', 'error');
                    setTimeout(() => {
                        document.querySelector(`.match-item[data-function="${e2SelectedMatch}"]`).classList.remove('wrong');
                    }, 1000);
                    e2SelectedMatch = null;
                }
            });
        });

        // E3: Ã–rnek HazÄ±rlÄ±ÄŸÄ±
        function selectMode(mode, element) {
            currentMode = mode;
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            element.classList.add('active');
            
            if (mode === 'plant') {
                document.getElementById('sampleTitle').textContent = 'Bitki Ã–rneÄŸi HazÄ±rlama AdÄ±mlarÄ±';
            } else {
                document.getElementById('sampleTitle').textContent = 'Hayvan Ã–rneÄŸi HazÄ±rlama AdÄ±mlarÄ±';
            }
        }

        function completeStep(stepNum) {
            const steps = document.querySelectorAll('.step-animation');
            const step = steps[stepNum - 1];
            
            if (!step.classList.contains('completed')) {
                step.classList.add('completed');
                e3StepsCompleted++;
                
                if (e3StepsCompleted === 4) {
                    document.getElementById('e3NextBtn').disabled = false;
                    showFeedback('e3Feedback', 'ğŸ‰ TÃ¼m hazÄ±rlÄ±k adÄ±mlarÄ±nÄ± tamamladÄ±nÄ±z!', 'success');
                }
            }
        }

        // E4 & E5: HÃ¼cre GÃ¶zlemi
        function labelPart(element, cellType) {
            const label = element.getAttribute('data-label');
            element.classList.add('labeled');
            
            if (cellType === 'plant') {
                plantLabels[label] = true;
                if (plantLabels.zar && plantLabels.sitoplazma && plantLabels.cekirdek) {
                    document.getElementById('e4NextBtn').disabled = false;
                    showFeedback('e4Feedback', 'âœ… TÃ¼m temel kÄ±sÄ±mlarÄ± iÅŸaretlediniz!', 'success');
                }
            } else {
                animalLabels[label] = true;
                if (animalLabels.zar && animalLabels.sitoplazma && animalLabels.cekirdek) {
                    document.getElementById('e5NextBtn').disabled = false;
                    showFeedback('e5Feedback', 'âœ… TÃ¼m temel kÄ±sÄ±mlarÄ± iÅŸaretlediniz!', 'success');
                }
            }
        }

        function changeMagnification(type, value) {
            const levels = ['DÃ¼ÅŸÃ¼k', 'Orta', 'YÃ¼ksek'];
            const scales = [1, 1.3, 1.6];
            document.getElementById(type + 'Mag').textContent = levels[value - 1];
            const cellView = document.getElementById(type + 'CellView');
            cellView.style.transform = `scale(${scales[value - 1]})`;
        }

        function changeFocus(type, value) {
            const cellView = document.getElementById(type + 'CellView');
            const blur = (100 - value) / 20;
            cellView.style.filter = `blur(${blur}px)`;
        }

        // E6: Ã‡izim AtÃ¶lyesi
        window.addEventListener('load', function() {
            plantCtx = document.getElementById('plantCanvas').getContext('2d');
            animalCtx = document.getElementById('animalCanvas').getContext('2d');
            
            setupCanvas('plantCanvas', plantCtx);
            setupCanvas('animalCanvas', animalCtx);
        });

        function setupCanvas(canvasId, ctx) {
            const canvas = document.getElementById(canvasId);
            
            canvas.addEventListener('mousedown', (e) => {
                isDrawing = true;
                const rect = canvas.getBoundingClientRect();
                ctx.beginPath();
                ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
            });

            canvas.addEventListener('mousemove', (e) => {
                if (!isDrawing) return;
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                if (currentTool === 'pen') {
                    ctx.strokeStyle = document.getElementById('colorPicker').value;
                    ctx.lineWidth = 2;
                    ctx.lineTo(x, y);
                    ctx.stroke();
                } else if (currentTool === 'eraser') {
                    ctx.clearRect(x - 10, y - 10, 20, 20);
                }
            });

            canvas.addEventListener('mouseup', () => {
                isDrawing = false;
            });
        }

        function selectTool(tool, element) {
            currentTool = tool;
            document.querySelectorAll('.tool-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            element.classList.add('active');
        }

        function clearCanvas(type) {
            if (type === 'plant') {
                plantCtx.clearRect(0, 0, 400, 400);
            } else {
                animalCtx.clearRect(0, 0, 400, 400);
            }
        }

        function addLabel(type, label) {
            if (type === 'plant') {
                if (label === 'HÃ¼cre ZarÄ±') plantLabelsAdded.zar = true;
                if (label === 'Sitoplazma') plantLabelsAdded.sitoplazma = true;
                if (label === 'Ã‡ekirdek') plantLabelsAdded.cekirdek = true;
            } else {
                if (label === 'HÃ¼cre ZarÄ±') animalLabelsAdded.zar = true;
                if (label === 'Sitoplazma') animalLabelsAdded.sitoplazma = true;
                if (label === 'Ã‡ekirdek') animalLabelsAdded.cekirdek = true;
            }
            
            showFeedback('e6Feedback', `âœ… "${label}" etiketi eklendi!`, 'success');
        }

        function updateChecklist() {
            const allChecked = document.getElementById('check1').checked && 
                              document.getElementById('check2').checked && 
                              document.getElementById('check3').checked;
            document.getElementById('e6NextBtn').disabled = !allChecked;
        }

        // E7: Benzerlik-FarklÄ±lÄ±k
        const cards = document.querySelectorAll('.card');
        const dropZones = document.querySelectorAll('.drop-zone');
        let draggedCard = null;

        cards.forEach(card => {
            card.addEventListener('dragstart', function() {
                draggedCard = this;
                this.classList.add('dragging');
            });

            card.addEventListener('dragend', function() {
                this.classList.remove('dragging');
            });
        });

        dropZones.forEach(zone => {
            zone.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.classList.add('dragover');
            });

            zone.addEventListener('dragleave', function() {
                this.classList.remove('dragover');
            });

            zone.addEventListener('drop', function(e) {
                e.preventDefault();
                this.classList.remove('dragover');
                
                const cardType = draggedCard.getAttribute('data-type');
                const zoneId = this.id;
                
                if ((zoneId === 'benzerlikZone' && cardType === 'benzerlik') ||
                    (zoneId === 'farkZone' && cardType === 'fark')) {
                    this.appendChild(draggedCard);
                    draggedCard.style.cursor = 'default';
                    draggedCard.draggable = false;
                    
                    if (cardType === 'benzerlik') benzerlikCount++;
                    if (cardType === 'fark') farkCount++;
                    
                    showFeedback('e7Feedback', 'âœ… DoÄŸru yerleÅŸtirme!', 'success');
                    
                    if (benzerlikCount >= 3 && farkCount >= 3) {
                        document.getElementById('e7NextBtn').disabled = false;
                        showFeedback('e7Feedback', 'ğŸ‰ Harika! Yeterli sayÄ±da kart yerleÅŸtirdiniz. Devam edebilirsiniz!', 'success');
                    }
                } else if (cardType === 'yanlis') {
                    showFeedback('e7Feedback', 'âŒ Bu kart yanlÄ±ÅŸ bilgi iÃ§eriyor! DoÄŸru kartlarÄ± seÃ§in.', 'error');
                } else {
                    showFeedback('e7Feedback', 'âŒ YanlÄ±ÅŸ bÃ¶lge! Tekrar deneyin.', 'error');
                }
            });
        });

        // E8: Organeller
        function selectOrganelle(element) {
            document.querySelectorAll('.match-item[data-organelle]').forEach(item => {
                item.classList.remove('selected');
            });
            element.classList.add('selected');
            e8SelectedOrganelle = element.getAttribute('data-organelle');
        }

        function matchFunction(element) {
            if (!e8SelectedOrganelle) {
                showFeedback('e8Feedback', 'LÃ¼tfen Ã¶nce bir organeli seÃ§in!', 'info');
                return;
            }

            const functionType = element.getAttribute('data-function');
            const correctMatches = {
                'kloroplast': 'fotosentez',
                'koful': 'depolama',
                'duvar': 'destek',
                'zar': 'kontrol',
                'sitoplazma': 'ortam',
                'cekirdek': 'yonetim',
                'sentriyol': 'bolunme'
            };

            if (correctMatches[e8SelectedOrganelle] === functionType) {
                element.classList.add('correct');
                document.querySelector(`.match-item[data-organelle="${e8SelectedOrganelle}"]`).classList.add('correct');
                e8Matches[e8SelectedOrganelle] = true;
                showFeedback('e8Feedback', 'âœ… MÃ¼kemmel eÅŸleÅŸtirme!', 'success');
                e8SelectedOrganelle = null;

                if (Object.keys(e8Matches).length === 7) {
                    document.getElementById('e8NextBtn').disabled = false;
                    showFeedback('e8Feedback', 'ğŸ‰ TÃ¼m eÅŸleÅŸtirmeleri baÅŸarÄ±yla tamamladÄ±nÄ±z!', 'success');
                }
            } else {
                element.classList.add('wrong');
                showFeedback('e8Feedback', 'âŒ YanlÄ±ÅŸ eÅŸleÅŸtirme. Tekrar deneyin!', 'error');
                setTimeout(() => {
                    element.classList.remove('wrong');
                }, 1000);
            }
        }

        // E9: Analojiler
        function checkAnalogies() {
            const inputs = document.querySelectorAll('.analogy-card input');
            let correct = 0;
            
            inputs.forEach(input => {
                const answer = input.value.toLowerCase().trim();
                const correctAnswer = input.getAttribute('data-answer').toLowerCase();
                
                if (answer.includes(correctAnswer) || correctAnswer.includes(answer)) {
                    input.style.borderColor = '#22c55e';
                    input.style.background = '#dcfce7';
                    correct++;
                } else {
                    input.style.borderColor = '#ef4444';
                    input.style.background = '#fee2e2';
                }
            });

            if (correct >= 3) {
                document.getElementById('e9NextBtn').disabled = false;
                showFeedback('e9Feedback', `âœ… Harika! ${correct}/5 doÄŸru cevap!`, 'success');
            } else {
                showFeedback('e9Feedback', `Daha fazla analoji yapmalÄ±sÄ±nÄ±z. ${correct}/5 doÄŸru.`, 'info');
            }
        }

        // E10: Son Test
        function answerQuestion(questionNum, isTrue, correctAnswer) {
            const question = event.target.closest('.quiz-question');
            const options = question.querySelectorAll('.quiz-option');
            
            options.forEach(opt => {
                opt.style.pointerEvents = 'none';
                opt.classList.remove('selected');
            });
            
            event.target.classList.add('selected');
            
            if (isTrue === correctAnswer) {
                event.target.classList.add('correct');
                quizAnswers[questionNum] = true;
            } else {
                event.target.classList.add('wrong');
                quizAnswers[questionNum] = false;
            }

            if (Object.keys(quizAnswers).length === 5) {
                calculateScore();
            }
        }

        function calculateScore() {
            quizScore = 0;
            for (let key in quizAnswers) {
                if (quizAnswers[key]) quizScore++;
            }
            
            const percentage = (quizScore / 5) * 100;
            
            document.getElementById('finalResult').style.display = 'block';
            document.getElementById('scoreDisplay').textContent = `${percentage}%`;
            
            if (percentage >= 80) {
                document.getElementById('badgeContainer').innerHTML = `
                    <div class="badge">ğŸ†</div>
                    <h3 style="text-align: center; color: #22c55e;">Tebrikler! Rozet KazandÄ±nÄ±z!</h3>
                `;
                showFeedback('e10Feedback', 'ğŸ‰ BaÅŸarÄ±lÄ±! TÃ¼m Ã¶ÄŸrenme hedeflerini tamamladÄ±nÄ±z!', 'success');
            } else {
                showFeedback('e10Feedback', 'âŒ %80 baÅŸarÄ± eÅŸiÄŸine ulaÅŸamadÄ±nÄ±z. E7\'ye dÃ¶nÃ¼p tekrar Ã§alÄ±ÅŸmanÄ±z Ã¶nerilir.', 'error');
            }
        }

        function downloadReport() {
            alert('Rapor indirme iÅŸlevi geliÅŸtirilme aÅŸamasÄ±nda. GerÃ§ek uygulamada PDF/PNG olarak rapor indirebilirsiniz.');
        }

        // YardÄ±mcÄ± fonksiyonlar
        function showFeedback(elementId, message, type) {
            const feedbackEl = document.getElementById(elementId);
            feedbackEl.className = `feedback ${type}`;
            feedbackEl.textContent = message;
            feedbackEl.style.display = 'block';
        }

        // Ä°lk yÃ¼klemede ilerleme Ã§ubuÄŸunu ayarla
        updateProgress();
    </script>
</body>
</html>